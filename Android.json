{
  "dns": {
    "servers": [
      {"tag":"ali","type":"https","server":"dns.alidns.com","domain_resolver":"hosts"},
      {"tag":"google","type":"https","server":"dns.google","domain_resolver":"hosts","detour":"proxy"},
      {"tag":"local","type":"local"},
      {"tag":"fake-ip-dns-server","type":"fakeip","inet4_range":"198.18.0.0/15","inet6_range":"fc00::/18"},
      {"tag":"hosts","type":"hosts","predefined":{"dns.alidns.com":["223.5.5.5","223.6.6.6","2400:3200::1","2400:3200:baba::1"],"dns.google":["8.8.8.8","8.8.4.4"]}}
    ],
    "rules": [
      {"clash_mode":"Direct","action":"route","server":"local"},
      {"clash_mode":"Global","action":"route","server":"fake-ip-dns-server"},
      {"rule_set":"AWAvenue-Ads","action":"reject","rcode":"NXDOMAIN"},
      {"query_type":"HTTPS","action":"reject"},
      {"query_type":["A","AAAA"],"action":"route","server":"fake-ip-dns-server","rewrite_ttl":1},
      {"rule_set":"cn","action":"route","server":"local"}
    ],
    "final": "google",
    "independent_cache": true
  },
  "route": {
    "rules": [
      {"action":"sniff","sniffer":["http","tls","quic","dns"]},
      {"type":"logical","mode":"or","rules":[{"port":53},{"protocol":"dns"}],"action":"hijack-dns"},
      {"clash_mode":"Direct","action":"route","outbound":"direct"},
      {"clash_mode":"Global","action":"route","outbound":"proxy"},
      {"rule_set":"AWAvenue-Ads","action":"reject"},
      {"ip_is_private":true,"action":"route","outbound":"direct"},
      {"rule_set":"private","action":"route","outbound":"direct"},
      {"outbound":"tg-sg","ip_cidr":["91.108.16.0/21","91.108.56.0/23","149.154.168.0/22","2001:b28:f23c::/48","2001:b28:f23f::/48"]},
      {"outbound":"tg-us","ip_cidr":["91.108.12.0/22","149.154.172.0/22","2001:b28:f23d::/48"]},
      {"outbound":"tg-eu","ip_cidr":["5.28.192.0/18","91.105.192.0/23","91.108.4.0/22","91.108.8.0/22","91.108.56.0/22","95.161.64.0/20","109.239.140.0/24","149.154.160.0/21","185.76.151.0/24","2001:67c:4e8::/48","2a0a:f280:203::/48"]},
      {"rule_set":"ai","action":"route","outbound":"ai"},
      {"rule_set":["telegram","github","twitter","youtube","google","gfw"],"action":"route","outbound":"proxy"},
      {"action":"resolve" /*"match_only":true*/},
      {"rule_set":"cn_ip","action":"route","outbound":"direct"}
    ],
    "final": "proxy",
    "default_domain_resolver": "ali",
    "default_domain_match_strategy": "prefer_fqdn",
    "auto_detect_interface": true,
    "rule_set": [
      {"tag":"AWAvenue-Ads","type":"remote","format":"source","url":"https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Singbox.json","download_detour":"proxy"},
      {"tag":"private","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-private.srs","download_detour":"proxy"},
      {"tag":"ai","type":"remote","format":"binary","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/ai.srs","download_detour":"proxy"},
      {"tag":"telegram","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-telegram.srs","download_detour":"proxy"},
      {"tag":"github","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-github.srs","download_detour":"proxy"},
      {"tag":"twitter","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-twitter.srs","download_detour":"proxy"},
      {"tag":"youtube","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-youtube.srs","download_detour":"proxy"},
      {"tag":"google","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-google.srs","download_detour":"proxy"},
      {"tag":"gfw","type":"remote","format":"binary","url":"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/gfw.srs","download_detour":"proxy"},
      {"tag":"cn","type":"remote","format":"binary","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/cn.srs","download_detour":"proxy"},
      {"tag":"cn_ip","type":"remote","format":"binary","url":"https://github.com/DustinWin/ruleset_geodata/releases/download/sing-box-ruleset/cnip.srs","download_detour":"proxy"}
    ]
  },
  "outbounds": [
    {"tag":"proxy","type":"selector","outbounds":["hk","sg","jp","us","other"],"default":"jp"},
    {"tag":"ai","type":"selector","outbounds":["hk","sg","jp","us","other"],"default":"us"},
    {"tag":"tg-sg","type":"selector","outbounds":["sg","proxy"],"default":"sg"},
    {"tag":"tg-us","type":"selector","outbounds":["us","proxy"],"default":"us"},
    {"tag":"tg-eu","type":"selector","outbounds":["eu","proxy"],"default":"eu"},
    {"tag":"hk","type":"selector","outbounds":[]},
    {"tag":"sg","type":"selector","outbounds":[]},
    {"tag":"jp","type":"selector","outbounds":[]},
    {"tag":"us","type":"selector","outbounds":[]},
    {"tag":"eu","type":"selector","outbounds":[]},
    {"tag":"other","type":"selector","outbounds":[]},
    {"tag":"direct","type":"direct","domain_resolver":"local"},
  ],
  "inbounds": [
    {"tag":"tun-in","type":"tun","address":["172.18.0.1/30","fdfe:dcba:9876::1/126"],"auto_route":true,"auto_redirect":false,"platform":{"http_proxy":{"enabled":true,"server":"127.0.0.1","server_port":7890}}},
    {"tag":"mixed-in","type":"mixed","listen":"127.0.0.1","listen_port":7890,"set_system_proxy":false}
  ],
  "log": {"disabled":false,"timestamp":true,"level":"warn","output":""},
  "experimental": {
    "cache_file": {"enabled":true,"store_fakeip":true,"store_rdrc":true},
    "clash_api": {
      "external_controller": "127.0.0.1:9090",
      "external_ui": "ui",
      "external_ui_download_url": "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip",
      "external_ui_download_detour": "proxy",
      "external_ui_update_interval": "1d",
      "access_control_allow_origin": ["https://metacubexd.pages.dev","https://d.metacubex.one","https://board.zash.run.place"],
      "access_control_allow_private_network": true,
      "secret": ""
    }
  }
}