//æ—¥å¿—è®°å½•
{
  "log": {
    "disabled": false,
    "level": "warn",      //æ—¥å¿—è¯¦ç»†è®°å½•
    "output": "",
    "timestamp": true     //æ‰“å¼€æ ‡æ³¨æ—¥å¿—æ—¶é—´
  },
  "experimental": {
    "clash_api": {
      "external_controller": "127.0.0.1:20123",
      "external_ui": "",
      "external_ui_download_url": "",
      "external_ui_download_detour": "ğŸ¯ å…¨çƒç›´è¿",
      "secret": "ID_ndudolt2",

      //å·¥ä½œæ¨¡å¼rule/global/Enhanced
      "default_mode": "Enhanced", 
      
      "access_control_allow_origin": [
        "*"
      ],
      "access_control_allow_private_network": false
    },
    "cache_file": {

      //å¯ç”¨ç¼“å­˜ è§„åˆ™é›†
      "enabled": true,
      //ç¼“å­˜è·¯å¾„
      "path": "cache.db",
      "cache_id": "",

      //æŒä¹…åŒ–Fakeip
      "store_fakeip": false,
      //æŒä¹…åŒ–å·²æ‹’ç»çš„dnså“åº”
      "store_rdrc": false,
      
      "rdrc_timeout": "7d"
    }
  },

  //è¿›ç«™ç›‘æ§
  "inbounds": [
    {
      "type": "mixed",
      "tag": "mixed-in",
      "listen": "127.0.0.1",
      "listen_port": 20122,
      "tcp_fast_open": false,
      "tcp_multi_path": false,
      "udp_fragment": false
    },
    {
      "type": "tun",
      "tag": "tun-in",
      "interface_name": "",
      "address": [
        "172.18.0.1/30",
        "fdfe:dcba:9876::1/126"
      ],
      "mtu": 9000,
      "auto_route": true,
      "strict_route": true,
      "sniff": true, 
      "endpoint_independent_nat": false,
      "stack": "mixed",
      "platform": {

        //httpä»£ç†
        "http_proxy": {
          "enabled": true,
          "server": "127.0.0.1",
          "server_port": 20122
         }
       }
     }
  ],

  //å‡ºç«™è®¾ç½®
  "outbounds": [

    //ç›´è¿
    {
      "type": "direct",
      "tag": "ğŸ¯ å…¨çƒç›´è¿"
    },
  
    //å…¨å±€
    {
      "type": "selector",
      "tag": "GLOBAL",
      "interrupt_exist_connections": true,
      "outbounds": [
        "ğŸš€ èŠ‚ç‚¹é€‰æ‹©",
        "ğŸˆ è‡ªåŠ¨é€‰æ‹©",
        "ğŸ¯ å…¨çƒç›´è¿",
        "ğŸŸ æ¼ç½‘ä¹‹é±¼"
      ]
      //"default": "æ‰‹åŠ¨é€‰æ‹©"  è¿™æ¡å¯ä»¥è®©è§„åˆ™é€‰ä¸€ä¸ªé»˜è®¤çš„
    },
    
    {
      "type": "selector",
      "tag": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©",
      "interrupt_exist_connections": true,
      "outbounds": [
        "ğŸˆ è‡ªåŠ¨é€‰æ‹©",
        "ä½å®…IP | ğŸ‡µğŸ‡· æ³¢å¤šé»å„ 01"
      ]
    },
    
    {
      "type": "urltest",
      "tag": "ğŸˆ è‡ªåŠ¨é€‰æ‹©",
      "url": "https://www.gstatic.com/generate_204",
      "interval": "3m",
      "tolerance": 150,
      "interrupt_exist_connections": true,
      "outbounds": [
        "ä½å®…IP | ğŸ‡µğŸ‡· æ³¢å¤šé»å„ 01"
      ]
    },
    
    {
      "type": "selector",
      "tag": "ğŸŸ æ¼ç½‘ä¹‹é±¼",
      "interrupt_exist_connections": true,
      "outbounds": [
        "ğŸš€ èŠ‚ç‚¹é€‰æ‹©",
        "ğŸ¯ å…¨çƒç›´è¿"
      ]
    },
    

    //ä¸ªäººçš„èŠ‚ç‚¹
    {
      "type": "socks",
      "tag": "ä½å®…IP | ğŸ‡µğŸ‡· æ³¢å¤šé»å„ 01",
      "server": "100.bgp.666888.biz",
      "server_port": 46867,
      "username": "5258f8e2",
      "password": "56864eaa",
      "version": "5"
    }
  ],

  //å‡ºç«™çš„è§„åˆ™åˆ†æµ
  "route": {
    "rules": [
      {
        "action": "sniff",       //å—…æ¢è¿›ç«™ç½‘ç»œ
        "inbound":[
           "tun-in",
           "mixed-in"
          ]
      },
      
      //æ‹¦æˆªdns
      {
        "action": "hijack-dns",
        "protocol": "dns"
      },
      
      {
        "action": "route",
        "clash_mode": "direct",
        "outbound": "ğŸ¯ å…¨çƒç›´è¿"
      },
      {
        "action": "route",
        "clash_mode": "global",
        "outbound": "GLOBAL"
      },

      {
        "action": "reject",
        "protocol": "quic",
        "method": "drop"
      },


      {
        "action": "reject",
        "network": "quic",
        "port": 853,
        "method": "drop"
      },
      

      {
        "action": "reject",
        "protocol": "stun",
        "method": "drop"
      },

      {
        "network": "udp",
        "port": 443,
        "action": "reject",
        "method": "drop"
      },

      
      {
        "ip_is_private": true,
        "outbound": "ğŸ¯ å…¨çƒç›´è¿"
      },

      //å»å¹¿å‘Š
      {
        "action": "reject",
        "rule_set": [
          "Category-Ads"
        ],
        "method": "drop"
      },


      //èµ°ç›´è¿çš„è§„åˆ™
      {
        "action": "route",
        "rule_set": [
          "GeoSite-Private",
          "GeoSite-CN",
          "GeoIP-Private",
          "geoip-cn",
          "geosite-geolocation-cn",
          "ChinaMax"
        ],
        "outbound": "ğŸ¯ å…¨çƒç›´è¿"
      },
      
      //åˆå¹¶ä¾‹å­"mode": "or" "and" {"type": "logical","mode": "or","rules":[{"protocol": "dns"},{"port": 53}//],//"outbound": "dns"//},


      
     
      
      

      //ä»¥ä¸‹è§„åˆ™åˆ†æµèµ°èŠ‚ç‚¹
      {
        "action": "route",
        "rule_set": [
          "Youtube",
          "Tiktok",
          "Whatsapp",
          "Instagram",
          "Facebook",
          "geosite-geolocation-!cn"
        ],
        "outbound": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      }
      
    ],

    //å‡ºç«™çš„åˆ†æµè§„åˆ™é›†
    "rule_set": [

      //æ²¹ç®¡è§„åˆ™é›†
      {
        "tag": "Youtube",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/youtube.srs",
        "format": "binary",
        "download_detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      },

      //TKè§„åˆ™é›†
      {
        "tag": "Tiktok",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/tiktok.srs",
        "format": "binary",
        "download_detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      },

      //WHATSAPPè§„åˆ™é›†
      {
        "tag": "Whatsapp",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/whatsapp.srs",
        "format": "binary",
        "download_detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      },

      //INSDè§„åˆ™é›†
      {
        "tag": "Instagram",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/instagram.srs",
        "format": "binary",
        "download_detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      },

      //FBè§„åˆ™é›†
      {
        "tag": "Facebook",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/facebook.srs",
        "format": "binary",
        "download_detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
      },
      {
        "tag": "Category-Ads",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/category-ads-all.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },

      
      {
        "tag": "GeoIP-Private",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/private.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },

      
      {
        "tag": "GeoSite-Private",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/private.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },
      
      {
        "tag": "GeoSite-CN",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/cn.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },

      
      {
        "tag": "geoip-cn",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geoip/cn.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },

      
      {
        "tag": "geosite-geolocation-cn",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/geolocation-cn.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },

      
      {
        "tag": "geosite-geolocation-!cn",
        "type": "remote",
        "url": "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@sing/geo/geosite/geolocation-!cn.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      },


      //ç½‘ä¸Šåˆ«äººåšçš„è½¬sing-boxçš„ä¸­å›½ è§„åˆ™åœ°å€
      {
        "tag": "ChinaMax",
        "type": "remote",
        "url": "https://cdn.jsdelivr.net/gh/senshinya/singbox_ruleset@main/rule/ChinaMax/ChinaMax.srs",
        "format": "binary",
        "download_detour": "ğŸ¯ å…¨çƒç›´è¿"
      }






      
    ],
    //è‡ªåŠ¨æ£€æµ‹å‡ºç«™æ¥å£
    "auto_detect_interface": true,

    //æŸ¥æ‰¾è¿›ç¨‹ä¿¡æ¯
    "find_process": true,    
    
    //æ²¡åœ¨è§„åˆ™é‡Œçš„èµ°æŒ‡å®šè§„åˆ™
    "final": "ğŸŸ æ¼ç½‘ä¹‹é±¼"
  },

  //ä»¥ä¸‹æ˜¯dnsæœåŠ¡å’Œè§„åˆ™è®¾ç½®
  
  "dns": {
    "servers": [
      {
        "tag": "Local-DNS",
        "address": "https://223.5.5.5:443/dns-query",
        "address_resolver": "Local-DNS-Resolver",
        "detour": "ğŸ¯ å…¨çƒç›´è¿"
      },
      {
        "tag": "Local-DNS-Resolver",
        "address": "udp://223.5.5.5:53",
        "detour": "ğŸ¯ å…¨çƒç›´è¿"
      },
      {
        "tag": "Remote-DNS",
        "address": "tls://8.8.8.8:853",
        "address_resolver": "Remote-DNS-Resolver",
        "detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©",
        "client_subnet": "1.0.1.0"
      },
      {
        "tag": "Remote-DNS-Resolver",
        "address": "udp://8.8.8.8:53",
        "detour": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©",
        "client_subnet": "1.0.1.0"
      }
    ],

    //dnsçš„è§„åˆ™
    "rules": [
      {
        "action": "route",
        "server": "Local-DNS",
        "outbound": "any"
      },
      //{
        //"inbound":[
          //"tun-in",
          //"mixed-in"
        //],
        //"server": "Local-DNS"
      //},
      {
        "action": "route",
        "clash_mode": "direct",
        "server": "Local-DNS"
      },
      {
        "action": "route",
        "clash_mode": "global",
        "server": "Remote-DNS"
      },

      {
        "action": "route",
        "rule_set": [
          "GeoSite-CN"
        ],
        "server": "Local-DNS"
      },

      {
        "action": "route",
        "rule_set": [
          "ChinaMax"
        ],
        "server": "Local-DNS"
      },

      {
        "action": "route",
        "rule_set": [
          "geosite-geolocation-cn"
        ],
        "server": "Local-DNS"
      },

      {
        "action": "route",
        "rule_set": [
          "geosite-geolocation-!cn"
        ],
        "server": "Remote-DNS"
      }
     
      //{
        //"type": "logical",
        //"mode": "and",
        //"rules": [
          //{
            //"rule_set": "geosite-geolocation-!cn",
            //"invert": true
          //},
          //{
            //"rule_set": "geoip-cn"
          //}
        //],
        //"server": "Remote-DNS",
        //"client_subnet": "1.0.1.0" // ä»»ä½•ä¸­å›½åœ°å€
      //}
    ],
    "disable_cache": false,
    "disable_expire": false,
    "independent_cache": false,

    //æ²¡æ‰¾åˆ°çš„dnsèµ°æŒ‡å®š
    "final": "Remote-DNS"
  }
}
